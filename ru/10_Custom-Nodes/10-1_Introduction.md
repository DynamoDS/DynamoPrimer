

## Пользовательские узлы

В Dynamo доступно большое количество стандартных узлов, позволяющих решать широкий спектр задач визуального программирования. Однако иногда создание пользовательских узлов позволяет прийти к более быстрому, оригинальному или удобному для совместного использования решению. Такие узлы можно многократно использовать в разных проектах, они помогают упростить и очистить график. Опубликовав их в менеджере пакетов, этими узлами можно поделиться с другими пользователями Dynamo по всему миру.

![](images/10-1/cn.jpg)

### Удаление лишних элементов из графика

Пользовательские узлы создаются путем помещения стандартных и созданных разработчиками узлов в так называемый пользовательский узел Dynamo, который можно рассматривать как своего рода контейнер. При запуске такого узла-контейнера в графике происходит запуск всех содержащихся в нем компонентов. В результате получается удобная комбинация узлов для многократного использования и предоставления другим пользователям.

### Адаптация к изменениям

Если в графике присутствует несколько копий пользовательского узла, их все можно отредактировать одновременно, изменив базовый экземпляр этого узла. Это позволяет с легкостью редактировать график и адаптировать его к изменениям, которые могут возникнуть в проекте или рабочем процессе.

### Совместная работа

Главное преимущество пользовательских узлов — удобство совместной работы. Например, если опытный программист создает в Dynamo сложный график, который затем требуется передать проектировщику, не работавшему с Dynamo, то программист может упростить представление графика и сделать его максимально доступным для проектировщика. Пользовательский узел-контейнер, в который помещается график, можно открывать для редактирования его содержимого, однако внешний вид контейнера при этом может оставаться простым и аккуратным. Таким образом, пользовательские узлы позволяют делать графики Dynamo лаконичными и интуитивно понятными.

![](images/10-1/customNodeDiagram.jpg)

### Способы создания узлов

Создавать пользовательские узлы в Dynamo можно самыми разными способами. В примерах, которые приведены в этой главе, пользовательские узлы создаются с помощью функций интерфейса Dynamo. Программисты, интересующиеся возможностями форматирования в C# или Zero Touch, могут ознакомиться с подробным обзором на [этой странице](https://github.com/DynamoDS/Dynamo/wiki/How-To-Create-Your-Own-Nodes) справки Wiki по Dynamo.

### Среда пользовательского узла

Перейдите в среду пользовательского узла, чтобы создать простой узел для расчета процентного соотношения. Среда пользовательского узла отличается от среды графика Dynamo, но работа в ней осуществляется на основе тех же принципов. Итак, пора создать первый пользовательский узел.

![Пользовательские узлы: введение](images/10-1/CustomNodes01.jpg)

> Чтобы создать пользовательский узел с нуля, запустите Dynamo и выберите «Пользовательский узел» или используйте сочетание клавиш CTRL + SHIFT + N в рабочей области.

![Пользовательские узлы: диалоговое окно](images/10-1/CustomNodes02.jpg)

> Задайте имя, описание и категорию в диалоговом окне «Свойства пользовательского узла».

> 1. **Имя:** Percentage
2. **Описание:** расчет процентного соотношения между двумя значениями.
3. **Категория:** Core.Math

![Пользовательские узлы: рабочая область](images/10-1/CustomNodes03.jpg)

> Откроется рабочая область с желтым фоном, указывающим на то, что вы находитесь в среде пользовательского узла. В этом окне можно получить доступ ко всем стандартным узлам Dynamo, а также к узлам **ввода** и **вывода**, которые используются для обозначения данных, поступающих в пользовательский узел на входе и получаемых из него на выходе. Они находятся в разделе *Core > Input*.

![Пользовательские узлы: рабочая область](images/10-1/CustomNodes04.jpg)

> 1. **Ввод:** узлы ввода используются для настройки портов ввода пользовательского узла. Синтаксис узла ввода: *имя_входного_порта : тип_данных = значение_по_умолчанию(необязательно)*.

2. **Вывод:** аналогично узлам ввода узлы вывода используются для настройки портов вывода пользовательского узла. К портам ввода и вывода можно добавлять **пользовательские комментарии**, указывающие на тип входных и выходных данных. Подробную информацию см. в разделе [Создание пользовательских узлов](10-2_Creating.md).

Этот пользовательский узел можно сохранить в файле DYF (вместо стандартного формата DYN), после чего он автоматически станет доступен в текущем и будущих сеансах. Найти этот узел можно будет в библиотеке, открыв категорию, заданную в свойствах узла.

![Добавление в библиотеку](images/10-1/CustomNodes05.jpg)

> Слева: категория Core > Math библиотеки по умолчанию. 
Справа: категория Core > Math, в которую добавлен новый пользовательский узел.

### Дальнейшее изучение

После создания первого пользовательского узла можно переходить к дальнейшим разделам, в которых подробнее рассматриваются функциональные возможности пользовательских узлов и процесс публикации типовых рабочих процессов. В следующем разделе представлен процесс разработки пользовательского узла, позволяющего переносить геометрию с одной поверхности на другую.

