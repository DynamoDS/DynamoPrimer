

## コード ブロックとは

コード ブロックを使用すると、Dynamo の核となる DesignScript というプログラミング言語を詳しく理解することができます。予備的な設計ワークフローをサポートするためにまったく新しく開発された DesignScript は、簡潔で理解しやすい言語です。短いコードを迅速に変更することも、大規模で複雑な相互作用に対応することもできます。DesignScript は、Dynamo 内部のほとんどの要素を駆動するエンジンの中核でもあります。Dynamo ノード内のほぼすべての機能と相互作用について、スクリプト言語に対する 1 対 1 の関係が存在するため、ノードベースの相互作用とスクリプトを柔軟に切り替えることができます。これは、Dynamo 独自の機能です。![Code Block ノードの紹介](images/7-1/daisy.png)操作に慣れていない初級ユーザのために、ノードを自動的にテキスト構文に変換する機能が用意されています。これにより、DesignScript を簡単に理解したり、グラフの大きな部分のサイズを小さくすることができます。 この操作は、「ノードをコード化」という処理を使用して実行されます。この処理については、[DesignScript 構文](7-2_Design-Script-syntax.md)のセクションで詳しく説明します。 操作に慣れている上級ユーザは、コード ブロックで各種の標準的なコードのパラダイムを使用して、既存の機能とユーザ定義の関係を組み合わせてカスタマイズすることができます。初心者ユーザと上級ユーザの間に位置する中級ユーザについては、設計作業をすばやく行うためのさまざまなショートカットやコード スニペットが用意されています。プログラミング経験のないユーザにとって、「コード ブロック」という言葉は難しそうに感じるかもしれませんが、使用方法も簡単で、安定して動作します。初級ユーザは、最小限のコードを記述してコード ブロックを効率的に使用でき、上級ユーザは、Dynamo 定義内の任意の場所で呼び出すことのできるスクリプト定義を作成することができます。

### コード ブロックの概要

コード ブロックとは、一言でいうと、ビジュアル スクリプティング環境内で使用するテキスト スクリプティング インタフェースです。コード ブロックは、数値、文字列、式などのデータ タイプとして使用することができます。コード ブロックは Dynamo 専用に設計されているため、コード ブロック内で任意の変数を定義することができます。定義した変数は、自動的にノードの入力に追加されます。

コード ブロックを使用すると、入力値の指定方法を柔軟に決定することができます。*(10, 5, 0)* という座標の基本的な点を作成するには、次のようにいくつかの方法があります。![柔軟性](images/7-2/flexibility.png)

ライブラリ内の使用可能な各種の関数に慣れてくると、「Point.ByCoordinates」と入力する方が、ライブラリ内を検索して目的のノードを探すよりも早いということがわかるようになります。たとえば「*Point*」と入力すると、点に対して適用できる関数のリストが表示されます。 これにより、直感的にスクリプトを作成することができ、Dynamo で関数を適用する方法を理解することができます。

### Code Block ノードを作成する

Code Block ノードは、*[Core] > [Input] > [Actions] > [Code Block]*で使用することができます。 または、キャンバス上でダブルクリックするだけで Code Block ノードが表示されます。この方が簡単です。Code Block ノードは頻繁に使用されるため、キャンバス上でダブルクリックするだけで Code Block ノードが表示されるようになっています。

![Code Block ノードの紹介](images/7-1/uicb.png)

### 数値、文字列、式

Code Block ノードを使用すると、データ タイプについても柔軟に操作することができます。Code Block ノードを使用して、数値、文字列、式をすばやく定義し、目的の値を出力することができます。

次の図を見ると、値を定義するための従来の方法(左側の方法)は少し冗長であることがわかります。この方法では、インタフェース内で目的のノードを検索してキャンバスに追加し、データを入力する必要があります。Code Block ノードを使用すると、キャンバス上でダブルクリックするだけで Code Block ノードを表示し、基本的な構文で正しいデータ タイプを入力することができます。![旧式のノード](images/7-3/obsolete01.png)

> *Code Block* ノードと比べた場合、*Number*、*String*、*Formula* の各ノードは旧式のノードということができます。

