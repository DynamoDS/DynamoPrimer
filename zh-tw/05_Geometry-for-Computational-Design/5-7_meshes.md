

## 網面

在運算塑型領域，網面是 3D 幾何圖形最普遍的表現形式之一。網面幾何圖形可以做為使用 NURBS 的輕量靈活的替代方案，網面用於從彩現與視覺化到數位製造及 3D 列印的所有領域。

### 什麼是網面？

網面是表示曲面或實體幾何圖形的一系列四邊形與三角形。與實體相似，網面物件的結構包括頂點、邊與面。還存在使網面獨一無二的其他性質，例如法線。

![網面元素](images/5-7/MeshElements2.png)

> 1. 網面頂點
2. 網面邊 *只有一個相鄰面的邊稱為「裸露邊」。所有其他邊稱為「覆蓋邊」
3. 網面面

### 網面元素

Dynamo 使用面-頂點資料結構定義網面。在最基本的層級，此結構只是歸入多邊形的點集合。網格的點稱為頂點，而類似於曲面的多邊形稱為面。若要建立網格，我們需要頂點清單，以及將這些頂點歸入面的系統 (稱為索引群組)。

![](images/5-7/meshFacesVertices.png)

> 1. 頂點清單
2. 將定義面的索引群組清單

#### 頂點 + 頂點法線

網面的頂點只是一系列點。在建構網面或取得網面結構的相關資訊時，頂點的索引非常重要。對於每個頂點，還有對應的頂點法線 (向量)，可描述所貼附面的平均方向，並有助於我們瞭解網面的「in」與「out」方位。

![頂點 + 法線](images/5-7/vertexNormals.png)

> 1. 頂點
2. 頂點法線

#### 面

面是按順序排列的三或四個頂點。因此，會根據編製索引的頂點位置指示網面面的「曲面」表現法。我們已擁有構成網面的頂點清單，因此不提供個別點以定義面，只需使用頂點索引即可。我們藉此也可以對多個面使用相同的頂點。

![](images/5-7/meshFaces.png)

> 1. 由索引 0、1、2、3 構成的四邊形面
2. 由索引 1、4、2 構成的三角形面 注意可以轉換索引群組的順序 - 只要序列的順序採用逆時鐘方式，就會正確定義面

### 網面與 NURBS 曲面的比較

網面幾何圖形與 NURBS 幾何圖形有什麼不同？您什麼時候需要擇其一而使用？

#### 參數化

在上一章，我們看到 NURBS 曲面由兩個方向的一系列 NURBS 曲線定義。這些方向標示為 ```U``` 與 ```V```，可藉此根據二維曲面範圍對 NURBS 曲面執行參數化。在電腦中，曲線本身儲存為方程式，藉此可採用任意小的精確度計算產生的曲面。但是，合併多個 NURBS 曲面會很困難。接合兩個 NURBS 曲面將產生 Polysurface，該幾何圖形的不同部分會有不同的 UV 參數與曲線定義。

![控制點](images/5-7/NURBSvsMESH-01.jpg)

> 1. 曲面
2. 等參數 (結構線) 曲線
3. 曲面控制點
4. 曲面控制多邊形
5. 等參數點
6. 曲面框
7. 網面
8. 裸露邊
9. 網面網路
10. 網面邊
11. 頂點法線
12. 網面面/網面面法線

另一方面，網面由離散數量的精確定義頂點及面構成。頂點的網路一般無法由簡單的 ```UV``` 座標定義，由於面是離散的，因此精確度內建於網面中，只能透過細化網面及加入更多面來變更。由於缺少數學描述，因此網面可以更靈活地處理單一網面中的複雜幾何圖形。

### 局部影響與整體影響的比較

另一項重要差異在於網面或 NURBS 幾何圖形的局部變更對整體形狀的影響程度。移動網面的一個頂點只會影響該頂點相鄰的面。在 NURBS 曲面中，影響程度較複雜，取決於曲面的度以及控制點的權值與節點。但是，一般而言，在 NURBS 曲面中移動單一控制點會提高幾何圖形的平滑度，並對幾何圖形產生更廣泛的變更。

![編輯](images/5-7/NURBSvsMESH-02.jpg)

> 1. NURBS 曲面 - 移動控制點會在整個造型範圍內產生影響
2. 網面幾何圖形 - 移動頂點只對相鄰元素產生影響

向量影像 (由直線與曲線構成) 與點陣式影像 (由個別像素構成) 的對比有助於您理解這一點。若拉近向量影像，曲線仍清晰鮮明，而拉近點陣式影像時，會看到個別像素變得更大。在此類比中，NURBS 曲面相當於向量影像，因為存在平滑的數學關係，而網面的行為方式類似於具有固定解析度的點陣式影像。

### Mesh Toolkit

透過安裝 [Mesh Toolkit](https://github.com/DynamoDS/Dynamo/wiki/Dynamo-Mesh-Toolkit)，可以延伸 Dynamo 的網面功能。Dynamo Mesh Toolkit 可提供工具，以匯入外部檔案格式的網面、根據 Dynamo 幾何圖形物件建立網面，並根據網面的頂點與索引手動建置網面。該資源庫還提供工具以修改網面、修復網面，或萃取水平切片以用於製造。

請參閱第 10.2 章以瞭解使用 Mesh Toolkit 的範例。

![Mesh Toolkit](images/5-7/MeshToolKit.png)

