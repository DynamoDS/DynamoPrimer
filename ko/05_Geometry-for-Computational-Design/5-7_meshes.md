

## 메쉬

계산 모델링 분야에서는 메쉬가 3D 형상을 나타내는 가장 널리 사용되는 양식 중 하나입니다. 메쉬 형상은 NURBS 대신 사용할 수 있는 간단하고 유연한 도구로, 메쉬는 렌더링 및 시각화부터 디지털 제작 및 3D 인쇄에 이르는 모든 분야에서 사용됩니다.

### 메쉬란?

메쉬는 표면 또는 솔리드 형상을 나타내는 사변형 및 삼각형의 모음입니다. 솔리드와 마찬가지로 메쉬 객체의 구조에는 정점, 모서리 및 면이 포함됩니다. 법선과 같이 메쉬를 고유하게 만드는 추가 특성이 있습니다.

![메시 요소](images/5-7/MeshElements2.jpg)

> 1. 메쉬 정점
2. 메쉬 모서리(*인접 면이 하나만 있는 모서리를 "Naked"라고 하며, 다른 모든 모서리는 "Clothed"임)
3. 메쉬 면

### 메시 요소

Dynamo에서는 면-정점 데이터 구조를 사용하여 메쉬를 정의합니다. 가장 기본적인 수준에서 이 구조는 단순히 다각형으로 그룹화된 점의 모음입니다. 메쉬의 점은 정점이라고 하고, 표면 같은 다각형은 면이라고 합니다. 메쉬를 작성하려면 정점 리스트와 이러한 정점을 색인 그룹이라는 면으로 그룹화하는 시스템이 필요합니다.

![](images/5-7/meshFacesVertices.jpg)

> 1. 정점 리스트
2. 면을 정의할 색인 그룹 리스트

#### 정점 + 정점 법선

메쉬의 정점은 점 리스트일 뿐입니다. 정점의 색인은 메쉬를 구성하거나 메쉬 구조에 대한 정보를 가져올 때 매우 중요합니다. 각 정점에는 부착된 면의 평균 방향을 그리고 메쉬의 "안쪽" 및 "바깥쪽" 방향을 파악하는 데 도움이 되는 해당 정점 법선(벡터)도 있습니다.

![정점 + 법선](images/5-7/vertexNormals.jpg)

> 1. 정점
2. 정점 법선

#### 면

면은 3개 또는 4개의 정점이 정렬된 리스트입니다. 따라서 메쉬 면의 "표면" 표현은 색인화되는 정점의 위치에 따라 포함됩니다. 메쉬를 구성하는 정점 리스트가 이미 있으므로 개별 점을 제공하여 면을 정의하는 대신, 간단히 정점의 색인을 사용합니다. 이렇게 하면 둘 이상의 면에서 동일한 정점을 사용할 수도 있습니다.

![](images/5-7/meshFaces.jpg)

> 1. 색인 0, 1, 2 및 3으로 만들어진 쿼드 면
2. 색인 1, 4, 2로 만든 삼각형 면. 색인 그룹은 순서대로 이동될 수 있습니다. 시퀀스가 시계 반대 방향으로 정렬되기만 하면 면이 올바르게 정의됩니다.

### 메쉬 및 NURBS 표면 비교

메쉬 형상은 NURBS 형상과 어떻게 다르고, 이러한 형상은 각기 언제 사용해야 할까요?

#### 매개변수화

이전 장에서는 두 방향으로 진행되는 일련의 NURBS 곡선에 의해 NURBS 표면이 정의되는 것을 확인했습니다. ```U``` 및 ```V```라는 레이블이 지정되는 이러한 방향을 통해 2D 표면 도메인에 따라 NURBS 표면을 매개변수화할 수 있게 됩니다. 곡선 자체는 컴퓨터에 방정식으로 저장되므로 결과 표면을 임의의 작은 정밀도로 계산할 수 있습니다. 그러나 여러 NURBS 표면을 함께 결합하는 것은 어려울 수 있습니다. 두 NURBS 표면을 결합하면 형상의 서로 다른 단면이 서로 다른 UV 매개변수 및 곡선 정의를 갖는 폴리 표면이 만들어집니다.

![기준점](images/5-7/NURBSvsMESH-01.jpg)

> 1. 표면
2. 아이소파라메트릭(아이소팜) 곡선
3. 표면 제어점
4. 표면 제어 다각형
5. 아이소파라메트릭 점
6. 표면 프레임
7. 메쉬
8. Naked 모서리
9. 메쉬 네트워크
10. 메쉬 모서리
11. 정점 법선
12. 메쉬 면/메쉬 면 법선

반면, 메쉬는 정확하게 정의된 불연속 개수의 정점 및 면으로 구성됩니다. 일반적으로 정점 네트워크는 간단한 ```UV``` 좌표로 정의할 수 없으며, 면이 불연속적이므로 정밀도는 메쉬로 구축되고 메쉬를 미세 조정하고 면을 더 추가하는 방법으로만 변경할 수 있습니다. 수학적 설명이 부족하면 메쉬가 단일 메쉬 내에서 복잡한 형상을 보다 유연하게 처리할 수 있습니다.

### 로컬 영향 및 전역 영향 비교

또 다른 중요한 차이점은 메쉬나 NURBS 형상의 로컬 변경이 전체 형태에 영향을 미치는 정도입니다. 메쉬의 한 정점을 이동하면 해당 정점에 인접한 면에만 영향을 줍니다. NURBS 표면에서는 영향의 범위가 보다 복잡하며 제어점의 가중치 및 노트뿐만 아니라 표면의 각도에 따라 달라집니다. 그러나 일반적으로 NURBS 표면에서 단일 제어점을 이동하면 형상에서 보다 매끄럽고 광범위한 변화가 일어납니다.

![편집](images/5-7/NURBSvsMESH-02.jpg)

> 1. NURBS 표면 - 제어점을 이동하면 모양 전체에 영향이 미칩니다.
2. 메쉬 형상 - 정점을 이동하면 인접 요소에만 영향을 미칩니다.

유용한 하나의 유추 방식은 벡터 이미지(선과 곡선으로 구성)와 래스터 이미지(개별 픽셀로 구성)를 비교하는 것입니다. 벡터 이미지를 줌 확대하면 곡선이 선명하고 명확하게 유지되지만, 래스터 이미지를 줌 확대하면 개별 픽셀이 더 커집니다. 이러한 유추에서 NURBS 표면은 원활한 수학적 관계가 있으므로 벡터 이미지와 비교될 수 있지만, 메쉬는 해상도가 설정된 래스터 이미지와 유사하게 동작합니다.

### Mesh Toolkit

[Mesh Toolkit](https://github.com/DynamoDS/Dynamo/wiki/Dynamo-Mesh-Toolkit) 패키지를 설치하여 Dynamo의 메쉬 기능을 확장할 수 있습니다. Dynamo Mesh Toolkit에서는 외부 파일 형식에서 메쉬를 가져오고, Dynamo 형상 객체에서 메쉬를 작성하고, 정점 및 색인으로 메쉬를 수동으로 작성하는 도구를 제공합니다. 라이브러리에서는 메쉬를 수정 또는 복구하거나, 제작에 사용할 수평 슬라이스를 추출하는 도구도 제공합니다.

Mesh Toolkit 사용에 대한 예는 10.2장을 참고하십시오.

![Mesh Toolkit](images/5-7/MeshToolKit.jpg)

